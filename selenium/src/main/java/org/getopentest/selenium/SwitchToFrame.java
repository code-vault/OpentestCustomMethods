package org.getopentest.selenium;

import org.getopentest.selenium.core.SeleniumTestAction;
import org.openqa.selenium.By;

public class SwitchToFrame extends SeleniumTestAction {

    @Override
    public void run() {
        super.run();
        
        String frameName = this.readStringArgument("frameName", null);
        By locator = this.readLocatorArgument("locator", null);
        Integer frameIndex = this.readIntArgument("frameIndex", null);
        
        this.waitForAsyncCallsToFinish();
        
        if (frameName != null) {
            this.driver.switchTo().frame(frameName);
        } else if (locator != null) {
            this.driver.switchTo().frame(this.getElement(locator));
        } else if (frameIndex != null) {
            this.driver.switchTo().frame(frameIndex);
        } else {
            throw new RuntimeException(
                    "You must provide at least one of the following arguments: frameName, locator, frameIndex.");
        }
    }
}
